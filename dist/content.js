(function(){function c(){n(),r(),h()}function r(){const e=f();chrome.runtime.sendMessage({action:"authStateChanged",isLoggedIn:e})}function f(){const e=!!document.querySelector('[data-menu="logout"], .o_user_menu, .oe_topbar_name'),t=!!document.querySelector('.oe_login_form, [action*="login"]'),s=document.cookie.includes("session_id=");return e||s&&!t}function n(){const e=m();e&&chrome.runtime.sendMessage({action:"sessionDetected",sessionId:e})}function m(){const e=document.cookie.split(";");for(const t of e){const[s,i]=t.trim().split("=");if(s==="session_id"&&i)return i}return null}function h(){new MutationObserver(i=>{var d,l;let a=!1;for(const u of i)if(u.type==="childList"&&u.addedNodes.length>0){for(const o of u.addedNodes)if(o.nodeType===Node.ELEMENT_NODE&&((d=o.matches)!=null&&d.call(o,'.oe_login_form, .o_user_menu, [data-menu="logout"]')||(l=o.querySelector)!=null&&l.call(o,'.oe_login_form, .o_user_menu, [data-menu="logout"]'))){a=!0;break}}a&&(n(),r())}).observe(document.body,{childList:!0,subtree:!0});let t=location.href;new MutationObserver(()=>{location.href!==t&&(t=location.href,n(),r())}).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c(),setInterval(()=>{n()},1e4)})();
